---

# See: https://github.com/stackhpc/ansible-role-cluster-nfs
# for variable definitions

nfs_server_default: "{{ hostvars[groups['control'] | first ].internal_address }}"

nfs_configurations:
  - comment: Export /exports/home from Slurm control node as /home
    nfs_enable:
        server:  "{{ inventory_hostname in groups['control'] }}"
        clients: true # is mounted on ALL nfs group, even nfs-server
    nfs_server: "{{ nfs_server_default }}"
    nfs_export: "/exports/home" # assumes skeleton TF is being used
    nfs_client_mnt_point: "/home"
